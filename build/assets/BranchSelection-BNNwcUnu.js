import"./_baseGetTag-CIiCLpID.js";import{n as L,q as k,c as T,w as m,o as n,a as e,i as h,v as _,s as B,j as d,F as g,k as u,m as p,h as w,H as C,t as l,l as c}from"./app-GEAUTrCp.js";import{C as S}from"./CustomerLayout-JSNYRkyJ.js";import{d as x,u as A,t as j,A as O}from"./timezone-D8JB1coT.js";import{_ as U}from"./_plugin-vue_export-helper-DlAUqK2U.js";x.extend(A);x.extend(j);const V={name:"BranchLocator",components:{CustomerLayout:S,Link:L},props:{branches:{type:Array,required:!0},locals:{type:Array,required:!0}},data(){return{searchQuery:"",showDropDown:!1,showOpenOnly:!1,deliveryOnly:!1,filteredBranches:[],selectedDay:{},filterLocal:[],sortOrder:"distance"}},mounted(){O.init({duration:700}),this.filterLocal=this.locals,this.filteredBranches=this.branches,this.branches.forEach(r=>{var t;((t=r.opening_hours)==null?void 0:t.length)>0&&(this.selectedDay[r.id]=r.opening_hours[0].day)})},methods:{formatTime(r){return x(`1970-01-01 ${r}`).tz("Asia/Dhaka").format("hh:mm A")},check(){this.showDropDown=!0,this.filteredBranches=this.branches;const r=this.searchQuery.toLowerCase();this.filterLocal=this.locals.filter(t=>t.name.toLowerCase().includes(r))},selectedArea(r){this.searchQuery=r.name,this.showDropDown=!1,console.log(r.division_id),r.division_id<=0?(console.log(r),this.filteredBranches=this.branches.filter(t=>t.local_id===r.own_id)):this.filteredBranches=this.branches.filter(t=>t.thana_id===r.id)},isOpen(r){if(!r)return!1;const t=new Date,y=t.toLocaleDateString("en-US",{weekday:"long"}),f=t.toLocaleTimeString("en-US",{hour12:!1}),o=r.find(i=>i.day===y);return o?f>=o.open&&f<=o.close:!1},isDeliveryAvailable(r){return!r.distance||!r.delivery_radius?!0:r.distance<=r.delivery_radius},formatDistance(r){return r?`${r.toFixed(1)} km away`:"Distance unknown"},getDirectionsUrl(r){return`https://www.google.com/maps/dir/?api=1&destination=${`${r.latitude},${r.longitude}`}`}}},N={class:"w-full px-0 py-8"},Q={class:"flex flex-col md:flex-row md:items-center md:justify-between mb-8 px-4"},z={class:"mt-4 md:mt-0 flex items-center space-x-4"},q={class:"flex items-center space-x-2"},F={class:"mb-8 bg-white dark:bg-gray-800 rounded-lg shadow-sm p-4"},M={class:"w-1/2 mx-auto"},E={class:"relative"},H={key:0,class:"mt-2 absolute w-full text-center bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-md z-10"},I=["onClick"],G={class:"p-5 border-b border-gray-200 dark:border-gray-800 bg-gradient-to-b from-gray-50 dark:from-gray-900 to-transparent"},P={class:"flex items-center justify-center"},W={class:"flex flex-col items-center text-center"},Y=["src"],J={class:"text-xl font-bold text-gray-900 dark:text-gray-100 tracking-tight"},K={class:"mt-1 text-sm dark:text-gray-400 not-italic line-clamp-2",style:{"font-size":"15px"}},R={class:"mt-1",style:{color:"rgb(17 24 39)","font-size":"15px"}},X={class:"p-5 space-y-5"},Z={class:"flex flex-wrap items-center justify-center gap-4 text-sm text-gray-600 dark:text-gray-300"},$=["onUpdate:modelValue"],ee=["value"],te=["href"],re={class:"space-y-3"},se={class:"max-h-64 overflow-y-auto scrollbar-thin scrollbar-thumb-indigo-500 scrollbar-track-gray-100 dark:scrollbar-track-gray-800"},oe={class:"w-full text-sm text-left"},ae={class:"py-3 px-4 text-center"},ie={class:"py-3 px-4 text-center"},ne={class:"py-3 px-4 text-center"},le={key:0},de={key:0,class:"text-center py-12 bg-white dark:bg-gray-800 rounded-lg shadow-sm"};function ce(r,t,y,f,o,i){const v=k("Link"),D=k("CustomerLayout");return n(),T(D,null,{default:m(()=>[e("div",N,[e("div",Q,[e("div",z,[e("div",q,[h(e("select",{"onUpdate:modelValue":t[0]||(t[0]=s=>o.sortOrder=s),class:"form-select rounded-md border-gray-300 dark:border-gray-700 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-300 text-sm focus:ring-indigo-500 focus:border-indigo-500"},t[3]||(t[3]=[e("option",{value:"distance"},"Sort by Distance",-1),e("option",{value:"name"},"Sort by Name",-1)]),512),[[_,o.sortOrder]])])])]),e("div",F,[e("div",M,[e("div",E,[h(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=s=>o.searchQuery=s),onInput:t[2]||(t[2]=(...s)=>i.check&&i.check(...s)),placeholder:"Type Your Place",class:"w-full py-3 px-4 text-center rounded-lg border border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-300 focus:ring-2 focus:ring-indigo-500"},null,544),[[B,o.searchQuery]]),o.searchQuery.length>0&&o.showDropDown?(n(),d("ul",H,[(n(!0),d(g,null,u(o.filterLocal,(s,a)=>(n(),d("li",{key:a,onClick:b=>i.selectedArea(s),class:"text-gray-700 cursor-pointer dark:text-gray-300 px-4 py-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"},l(s.name),9,I))),128))])):p("",!0)])])]),w(C,{name:"list",tag:"div",class:"grid gap-6 sm:grid-cols-2 lg:grid-cols-3 mt-6 px-4"},{default:m(()=>[(n(!0),d(g,null,u(o.filteredBranches,s=>(n(),d("div",{key:s.id,class:"relative bg-white dark:bg-gray-900 rounded-xl shadow-lg hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 border border-gray-200 dark:border-gray-800 overflow-hidden","data-aos":"fade-up",style:{"background-color":"rgb(249 115 22)"}},[t[9]||(t[9]=e("div",{class:"absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-indigo-500 to-purple-600"},null,-1)),e("div",G,[e("div",P,[e("div",W,[e("img",{src:s.image?"http://localhost:8000/storage/"+s.image:"http://localhost:8000/storage/uploads/logo.png",alt:"restaurant_logo",class:"w-14 h-14 rounded-full object-cover border-2 border-indigo-100 dark:border-indigo-900 mb-2"},null,8,Y),e("h3",J,l(s.name),1),e("address",K,l(s.address),1),e("div",R,l(s.contact_number),1)])])]),e("div",X,[e("div",Z,[e("div",null,[w(v,{href:r.route("customer.branch.menu",{branch:s.id,type:"collection"}),class:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-lg bg-indigo-600 text-white hover:bg-indigo-700 focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900 transition-all duration-200"},{default:m(()=>t[4]||(t[4]=[e("i",{class:"fas fa-shopping-bag mr-2"},null,-1),c(" Order Now ")])),_:2},1032,["href"])]),e("div",null,[h(e("select",{"onUpdate:modelValue":a=>o.selectedDay[s.id]=a,class:"w-48 p-2 border border-gray-300 dark:border-gray-700 rounded-lg bg-white dark:bg-gray-800 text-gray-900 dark:text-white focus:ring-2 focus:ring-indigo-500"},[t[5]||(t[5]=e("option",{value:""},"All Days",-1)),(n(),d(g,null,u(["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],a=>e("option",{key:a,value:a},l(a),9,ee)),64))],8,$),[[_,o.selectedDay[s.id]]])]),e("div",null,[e("a",{href:i.getDirectionsUrl(s),target:"_blank",rel:"noopener noreferrer",class:"inline-flex items-center justify-center px-4 py-2 text-sm font-semibold rounded-lg bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-gray-700 focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:focus:ring-offset-gray-900 transition-all duration-200"},t[6]||(t[6]=[e("i",{class:"fas fa-directions mr-2"},null,-1),c(" Directions ")]),8,te)])]),e("div",re,[e("div",se,[e("table",oe,[t[8]||(t[8]=e("thead",{class:"text-gray-700 dark:text-gray-300 border-b border-gray-300 dark:border-gray-700 sticky top-0 bg-white dark:bg-gray-900"},[e("tr",null,[e("th",{class:"py-3 px-4 text-center font-semibold"},[e("i",{class:"fas fa-coffee mr-1 text-yellow-500"}),c(" Breakfast ")]),e("th",{class:"py-3 px-4 text-center font-semibold"},[e("i",{class:"fas fa-utensils mr-1 text-blue-600"}),c(" Lunch ")]),e("th",{class:"py-3 px-4 text-center font-semibold"},[e("i",{class:"fas fa-moon mr-1 text-purple-500"}),c(" Dinner ")])])],-1)),e("tbody",null,[(n(!0),d(g,null,u(s.opening_hours.filter(a=>!o.selectedDay[s.id]||a.day===o.selectedDay[s.id]),(a,b)=>(n(),d("tr",{key:b,class:"hover:bg-gray-50 dark:hover:bg-gray-800 transition-colors"},[e("td",ae,l(i.formatTime(a.breakfast.start))+" - "+l(i.formatTime(a.breakfast.end)),1),e("td",ie,l(i.formatTime(a.lunch.start))+" - "+l(i.formatTime(a.lunch.end)),1),e("td",ne,l(i.formatTime(a.dinner.start))+" - "+l(i.formatTime(a.dinner.end)),1)]))),128)),s.opening_hours.filter(a=>!o.selectedDay[s.id]||a.day===o.selectedDay[s.id]).length===0?(n(),d("tr",le,t[7]||(t[7]=[e("td",{colspan:"4",class:"py-4 text-center text-gray-500 dark:text-gray-400 italic"},"Closed",-1)]))):p("",!0)])])])])])]))),128))]),_:1}),y.branches.length===0?(n(),d("div",de,t[10]||(t[10]=[e("i",{class:"fas fa-store-slash text-4xl text-gray-400 mb-4"},null,-1),e("h3",{class:"text-lg font-medium text-gray-900 dark:text-gray-100"},"No branches found",-1),e("p",{class:"mt-2 text-gray-500 dark:text-gray-400"},"Try adjusting your search criteria",-1)]))):p("",!0)])]),_:1})}const he=U(V,[["render",ce],["__scopeId","data-v-ba455996"]]);export{he as default};
