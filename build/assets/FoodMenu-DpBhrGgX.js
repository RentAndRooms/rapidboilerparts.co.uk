import{r as f,b as Q,d as te,c as se,w as R,o as l,a as e,h as oe,l as $,u as ae,n as le,j as r,t as a,p as V,m as w,i as F,B as M,F as y,k as b,v as re,y as ne,A as de}from"./app-GEAUTrCp.js";import{C as ie}from"./CustomerLayout-JSNYRkyJ.js";import{_ as ce}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ue={class:"flex justify-end mb-4",style:{width:"85%"}},ge={class:"flex items-center space-x-2"},xe={class:"font-medium"},pe={key:1,class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4"},ye={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto"},be={class:"flex justify-between items-center p-6 border-b border-gray-200 dark:border-gray-700"},ve={class:"text-2xl font-bold text-gray-900 dark:text-white"},fe={class:"p-6 space-y-6"},he={key:0,class:"text-gray-600 dark:text-gray-400"},_e={class:"space-y-3"},me={class:"flex gap-4"},ke={class:"flex items-center space-x-2 cursor-pointer"},we={class:"text-gray-700 dark:text-gray-300"},Ce={class:"space-y-3"},Fe={class:"flex flex-wrap gap-2"},qe={class:"space-y-3"},Te={class:"grid grid-cols-1 md:grid-cols-2 gap-3 max-h-60 overflow-y-auto"},$e=["value"],Pe={class:"flex-1"},Se={class:"text-gray-700 dark:text-gray-200 font-medium"},Ie={class:"text-green-600 dark:text-green-400 ml-2"},je={class:"flex items-center gap-4"},Ve={class:"flex items-center border border-gray-300 dark:border-gray-600 rounded-lg px-2 py-1"},Me={class:"px-4 text-gray-900 dark:text-white font-semibold"},Ne={class:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg"},Ae={class:"flex justify-between items-center text-lg"},Be={class:"font-bold text-2xl text-indigo-600 dark:text-indigo-400"},Ue={class:"max-w-7xl mx-auto px-4 sm:px-6"},Oe={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6"},De={class:"flex flex-col lg:flex-row lg:items-center lg:justify-between"},Ee={class:"flex-1"},ze={class:"text-2xl font-bold text-gray-900 dark:text-gray-100"},Je={class:"mt-2 flex flex-wrap items-center gap-4"},Le={class:"inline-flex items-center text-gray-600 dark:text-gray-400"},Qe={class:"inline-flex items-center text-gray-600 dark:text-gray-400"},Re={class:"mt-4 lg:mt-0"},He={class:"flex flex-col items-end"},Ge={class:"min-h-screen bg-gray-50 dark:bg-gray-900 w-full"},Ke={class:"container mx-auto px-4 py-8"},We={class:"grid grid-cols-1 lg:grid-cols-5 gap-6"},Xe={class:"lg:col-span-1"},Ye={class:"bg-white dark:bg-gray-800 rounded-2xl shadow-lg sticky top-24 p-6"},Ze={class:"space-y-2"},et=["onClick"],tt={class:"font-medium"},st={class:"text-sm bg-indigo-50 dark:bg-indigo-900/20 px-2.5 py-1 rounded-full"},ot={class:"lg:col-span-2 rounded-2xl bg-white dark:bg-gray-900 shadow-md"},at=["id"],lt={class:"dark:bg-gray-800 text-center rounded-t-2xl"},rt={class:"text-3xl font-bold text-gray-900 dark:text-white"},nt={class:"text-gray-600 dark:text-gray-400 leading-relaxed"},dt={class:"grid grid-cols-1 gap-6"},it={class:"p-6"},ct={class:"flex justify-between items-start mb-4"},ut={class:"text-xl font-semibold text-gray-900 text-white bg-[#F9733A] rounded-lg px-2 dark:text-white"},gt={class:"mb-4"},xt={class:"flex gap-2"},pt={class:"flex justify-between items-center border-t border-gray-200 dark:border-gray-700 pt-4"},yt={class:"text-xl font-bold text-gray-900 dark:text-white"},bt=["onClick"],vt={class:"lg:col-span-2"},ft={class:"relative flex"},ht={class:"text-xl font-semibold text-gray-900 dark:text-white mb-2"},_t={class:"text-sm text-gray-500 dark:text-gray-400 mb-4"},mt=["onClick"],kt={class:"mb-4"},wt={class:"flex gap-4"},Ct={class:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300"},Ft=["name","onUpdate:modelValue","onChange"],qt={key:0,class:"flex items-center space-x-2 text-sm text-gray-700 dark:text-gray-300"},Tt=["name","onUpdate:modelValue","onChange"],$t={class:"flex max-w-md mx-auto"},Pt={class:"p-6 rounded-2xl bg-white dark:bg-gray-900"},St={class:"flex flex-wrap items-center gap-1"},It={class:"p-6 rounded-2xl bg-white dark:bg-gray-900"},jt={class:"flex flex-wrap items-center gap-2"},Vt={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Mt={class:"flex items-center gap-3 mb-4"},Nt={class:"flex items-center border rounded-lg px-2 py-1 w-fit"},At=["onClick"],Bt={class:"px-2 text-gray-900 dark:text-white"},Ut=["onClick"],Ot={class:"max-w-md mx-auto bg-white rounded-2xl"},Dt={class:"grid grid-cols-3 font-medium text-gray-700"},Et={class:"text-center"},zt={class:"text-right"},Jt={class:"text-center"},Lt={class:"text-right"},Qt={class:"grid grid-cols-3 border-t font-medium text-gray-700"},Rt={class:"text-right"},Ht={key:0},Gt={class:"mt-4 p-4 bg-white dark:bg-gray-800 rounded-2xl shadow-md text-center"},Kt={class:"text-xl font-bold text-indigo-600 dark:text-indigo-400 ml-2"},Wt=["disabled"],Xt={key:0,class:"animate-spin h-5 w-5 text-white text-center",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},Yt={__name:"FoodMenu",props:{branch:{type:Object,required:!0},categories:{type:Array,required:!0},packages:{type:Array,required:!0},extrasFoods:{type:Array,required:!0},auth:{type:Object,default:()=>({})}},setup(h){var J,L;const m=h,P=f(!1),N=f(null),S=f("collection"),c=f(((L=(J=JSON.parse(localStorage.getItem("selectedItem")))==null?void 0:J.items)==null?void 0:L.map(o=>({...o,selected_extras:o.selected_extras||[],base_price:parseFloat(o.base_price)||0,half_price:o.half_price?parseFloat(o.half_price):null,total:parseFloat(o.total)||0,portion:o.portion||"full"})))??[]),I=f(!1),d=f(null),i=f({portion:"full",selected_extras:[],qty:1}),k=f({show:!1,message:""});let q=null;const A=(o,t=3e3)=>{q&&clearTimeout(q),k.value={show:!0,message:o},q=setTimeout(()=>{k.value.show=!1,k.value.message="",q=null},t)},B=Q(()=>{if(!d.value)return 0;const o=i.value.portion==="half"&&d.value.half_price?parseFloat(d.value.half_price):parseFloat(d.value.base_price),t=i.value.selected_extras.reduce((u,p)=>{const g=m.extrasFoods.find(v=>v.id===p);return u+(g?parseFloat(g.base_price):0)},0);return(o+t)*i.value.qty}),H=o=>{d.value=o,i.value={portion:"full",selected_extras:[],qty:1},I.value=!0},j=()=>{I.value=!1,d.value=null,i.value={portion:"full",selected_extras:[],qty:1}},G=()=>{if(!d.value)return;const o=parseFloat(d.value.base_price)||0,t=d.value.half_price?parseFloat(d.value.half_price):null,u=`${d.value.id}-${i.value.portion}-${JSON.stringify(i.value.selected_extras.sort())}`,p=c.value.findIndex(g=>`${g.id}-${g.portion}-${JSON.stringify((g.selected_extras||[]).sort())}`===u);if(p!==-1)c.value[p].qty+=i.value.qty,c.value[p].total=T(c.value[p]),A(`${d.value.name} quantity updated! (${c.value[p].qty})`);else{const g={...d.value,qty:i.value.qty,portion:i.value.portion,selected_extras:[...i.value.selected_extras],base_price:o,half_price:t,total:B.value};c.value.push(g),A(`${d.value.name} added to cart!`)}console.log("Added/Updated item:",c.value),_(),setTimeout(j,100)},T=o=>{const t=o.portion==="half"&&o.half_price?parseFloat(o.half_price):parseFloat(o.base_price),u=o.selected_extras.reduce((p,g)=>{const v=m.extrasFoods.find(s=>s.id===g);return p+(v?parseFloat(v.base_price):0)},0);return(t+u)*o.qty},K=o=>o.portion==="half"&&o.half_price?o.half_price:o.base_price,U=o=>{const t=m.extrasFoods.find(u=>u.id===o);return t?t.name:"Unknown"},O=o=>{const t=m.extrasFoods.find(u=>u.id===o);return t?parseFloat(t.base_price):0},D=o=>{const t=c.value.find(u=>u.id===o);t&&(t.total=T(t),_())},E=Q(()=>c.value.reduce((o,t)=>o+t.total,0)),W=o=>{c.value=c.value.filter(t=>t.id!==o),_()},X=()=>{c.value.length&&(P.value=!0,setTimeout(()=>{ne.visit(route("customer.checkout",{branch:m.branch.id}))},1e3))},_=()=>{localStorage.setItem("selectedItem",JSON.stringify({items:c.value,sub_total:E.value,order_type:S.value,timestamp:new Date().toISOString()}))},Y=o=>{const t=c.value.find(u=>u.id===o);t&&(t.qty++,t.total=T(t),_())},Z=o=>{const t=c.value.find(u=>u.id===o);t&&t.qty>1&&(t.qty--,t.total=T(t),_())},z=o=>m.packages.filter(t=>t.category_id==o),ee=o=>{N.value=o;const t=document.getElementById(`category-${o}`);t&&t.scrollIntoView({behavior:"smooth"})};return te(c,()=>{_()},{deep:!0}),(o,t)=>(l(),se(ie,null,{default:R(()=>{var u,p,g,v;return[e("div",ue,[oe(ae(le),{href:o.route("home"),class:"inline-flex items-center px-4 py-2 bg-[#F9733A] hover:bg-[#ea652f] text-white rounded-lg transition-colors duration-200"},{default:R(()=>t[5]||(t[5]=[e("i",{class:"fas fa-home mr-2"},null,-1),$(" Back ")])),_:1},8,["href"])]),k.value.show?(l(),r("div",{key:0,class:V(["fixed top-4 right-4 z-50 bg-green-500 text-white px-6 py-3 rounded-lg shadow-lg transform transition-all duration-300",k.value.show?"translate-x-0 opacity-100":"translate-x-full opacity-0"])},[e("div",ge,[t[6]||(t[6]=e("i",{class:"fas fa-check-circle"},null,-1)),e("span",xe,a(k.value.message),1)])],2)):w("",!0),I.value?(l(),r("div",pe,[e("div",ye,[e("div",be,[e("h2",ve,a((u=d.value)==null?void 0:u.name),1),e("button",{onClick:j,class:"text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-2xl"}," × ")]),e("div",fe,[(p=d.value)!=null&&p.description?(l(),r("div",he,a(d.value.description),1)):w("",!0),e("div",_e,[e("div",me,[e("label",ke,[F(e("input",{type:"radio",name:"modalPortion",value:"full","onUpdate:modelValue":t[0]||(t[0]=s=>i.value.portion=s),class:"form-radio text-indigo-600 focus:ring-indigo-500"},null,512),[[M,i.value.portion]]),e("span",we,"Price (৳"+a((g=d.value)==null?void 0:g.base_price)+")",1)])])]),e("div",Ce,[t[7]||(t[7]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 border-b-2 border-blue-400 inline-block pb-1"}," Foods Included ",-1)),e("div",Fe,[(l(!0),r(y,null,b((v=d.value)==null?void 0:v.foods,(s,x)=>(l(),r("span",{key:x,class:"bg-blue-500 text-white px-3 py-1 rounded-full text-sm"},a(s.name),1))),128))])]),e("div",qe,[t[8]||(t[8]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 border-b-2 border-green-400 inline-block pb-1"}," Select Extra Foods ",-1)),e("div",Te,[(l(!0),r(y,null,b(h.extrasFoods,s=>(l(),r("label",{key:s.id,class:"flex items-center gap-3 p-3 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer"},[F(e("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":t[1]||(t[1]=x=>i.value.selected_extras=x),class:"w-4 h-4 text-green-500 rounded border-gray-300 focus:ring-green-500"},null,8,$e),[[de,i.value.selected_extras]]),e("div",Pe,[e("span",Se,a(s.name),1),e("span",Ie,"(৳"+a(s.base_price)+")",1)])]))),128))])]),e("div",je,[t[9]||(t[9]=e("span",{class:"text-lg font-medium text-gray-700 dark:text-gray-300"},"Quantity:",-1)),e("div",Ve,[e("button",{onClick:t[2]||(t[2]=s=>i.value.qty=Math.max(1,i.value.qty-1)),class:"text-indigo-600 text-xl font-bold px-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"}," − "),e("span",Me,a(i.value.qty),1),e("button",{onClick:t[3]||(t[3]=s=>i.value.qty++),class:"text-indigo-600 text-xl font-bold px-2 hover:bg-gray-100 dark:hover:bg-gray-700 rounded"}," + ")])]),e("div",Ne,[e("div",Ae,[t[10]||(t[10]=e("span",{class:"font-medium text-gray-700 dark:text-gray-300"},"Total Price:",-1)),e("span",Be,"৳"+a(B.value),1)])])]),e("div",{class:"flex gap-3 p-6 border-t border-gray-200 dark:border-gray-700"},[e("button",{onClick:j,class:"flex-1 px-4 py-2 border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-300 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors"}," Cancel "),e("button",{onClick:G,class:"flex-1 px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors font-medium"}," Add to Cart ")])])])):w("",!0),e("div",Ue,[e("div",Oe,[e("div",De,[e("div",Ee,[e("h1",ze,a(h.branch.name),1),e("div",Je,[e("span",Le,[t[11]||(t[11]=e("i",{class:"fas fa-map-marker-alt mr-2"},null,-1)),$(" "+a(h.branch.address),1)]),e("span",Qe,[t[12]||(t[12]=e("i",{class:"fas fa-phone mr-2"},null,-1)),$(" "+a(h.branch.contact_number),1)])])]),e("div",Re,[e("div",He,[t[14]||(t[14]=e("label",{for:"orderType",class:"mb-1 text-sm text-gray-700 dark:text-gray-300 font-medium"},"Order Type",-1)),F(e("select",{id:"orderType","onUpdate:modelValue":t[4]||(t[4]=s=>S.value=s),onChange:_,class:"w-48 px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 text-gray-700 dark:text-gray-200 focus:outline-none focus:ring-2 focus:ring-indigo-500"},t[13]||(t[13]=[e("option",{value:"delivery"},"Delivery",-1),e("option",{value:"collection"},"Collection",-1)]),544),[[re,S.value]])])])])]),e("div",Ge,[e("div",Ke,[e("div",We,[e("aside",Xe,[e("div",Ye,[t[15]||(t[15]=e("h2",{class:"text-2xl font-bold text-gray-900 dark:text-white mb-4"},"Menu Categories",-1)),e("nav",Ze,[(l(!0),r(y,null,b(h.categories,s=>(l(),r("button",{key:s.id,onClick:x=>ee(s.id),class:V(["w-full text-left px-4 py-3 rounded-lg transition-all duration-200 flex justify-between items-center text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700",{"bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-300":N.value===s.id}])},[e("span",tt,a(s.name),1),e("span",st,a(z(s.id).length),1)],10,et))),128))])])]),e("main",ot,[(l(!0),r(y,null,b(h.categories,s=>(l(),r("section",{key:s.id,id:`category-${s.id}`,class:"scroll-mt-24 mb-8"},[e("div",lt,[e("h2",rt,a(s.name),1),e("p",nt,a(s.description),1)]),e("div",dt,[(l(!0),r(y,null,b(z(s.id),x=>(l(),r("article",{key:x.id,class:"bg-white dark:bg-gray-800 shadow-md overflow-hidden hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 rounded-b-2xl"},[e("div",it,[e("div",ct,[e("div",null,[e("h3",ut,a(x.name),1)]),e("div",null,[t[16]||(t[16]=e("i",{class:"fas fa-clock w-5 text-indigo-500"},null,-1)),e("span",null,"Prep time: "+a(x.preparation_time)+" mins",1)])]),e("div",gt,[t[17]||(t[17]=e("p",{class:"text-lg font-semibold text-gray-800 dark:text-gray-100 mb-2 border-b-2 border-blue-400 inline-block pb-1"}," Foods Included ",-1)),e("ul",xt,[(l(!0),r(y,null,b(x.foods,(n,C)=>(l(),r("li",{key:C,class:"bg-blue-400 text-white px-4 rounded-xl shadow-md hover:bg-blue-500 transition"},a(n.name),1))),128))])]),e("div",pt,[e("span",yt,"৳"+a(x.base_price),1),e("button",{onClick:n=>H(x),class:"bg-indigo-600 px-5 py-2.5 rounded-lg text-white hover:bg-indigo-700"},"Add To Cart",8,bt)])])]))),128))])],8,at))),128))]),e("div",vt,[(l(!0),r(y,null,b(c.value,(s,x)=>(l(),r("div",{key:s.id,class:V(["bg-white dark:bg-gray-800 rounded-2xl shadow-lg top-24 p-6",x>0?"mt-2":""])},[e("div",ft,[e("div",null,[e("h2",ht,a(s.name),1),e("p",_t,a(s.description),1)]),e("button",{onClick:n=>W(s.id),class:"absolute top-0 right-0 text-2xl text-white bg-red-600 hover:bg-red-700 rounded-full w-7 h-7 flex items-center justify-center shadow-lg",title:"Remove"},"×",8,mt)]),e("div",kt,[t[18]||(t[18]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1"},"Price",-1)),e("div",wt,[e("label",Ct,[F(e("input",{type:"radio",name:`portion-${s.id}`,value:"full",class:"form-radio text-indigo-600","onUpdate:modelValue":n=>s.portion=n,onChange:n=>D(s.id),checked:""},null,40,Ft),[[M,s.portion]]),e("span",null,"(৳"+a(s.base_price)+")",1)]),s.half_price?(l(),r("label",qt,[F(e("input",{type:"radio",name:`portion-${s.id}`,value:"half",class:"form-radio text-indigo-600","onUpdate:modelValue":n=>s.portion=n,onChange:n=>D(s.id)},null,40,Tt),[[M,s.portion]]),e("span",null,"Half (৳"+a(s.half_price)+")",1)])):w("",!0)])]),e("div",$t,[e("div",Pt,[t[19]||(t[19]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Food Included",-1)),e("ul",St,[(l(!0),r(y,null,b(s.foods,(n,C)=>(l(),r("li",{key:C,class:"px-1 text-sm rounded-full bg-rose-500/90 text-white"},a(n.name),1))),128))])]),e("div",It,[t[20]||(t[20]=e("h3",{class:"text-lg font-semibold text-gray-900 dark:text-gray-100 mb-4"},"Selected Extras",-1)),e("ul",jt,[(l(!0),r(y,null,b(s.selected_extras,(n,C)=>(l(),r("li",{key:C,class:"px-3 py-1 text-sm rounded-full bg-green-500/90 text-white"},a(U(n))+" (৳"+a(O(n))+") ",1))),128)),s.selected_extras.length?w("",!0):(l(),r("li",Vt," No extras selected "))])])]),e("div",Mt,[t[21]||(t[21]=e("span",{class:"text-sm text-gray-600 dark:text-gray-300"},"Quantity",-1)),e("div",Nt,[e("button",{onClick:n=>Z(s.id),class:"text-indigo-600 text-xl font-bold px-2"},"−",8,At),e("span",Bt,a(s.qty),1),e("button",{onClick:n=>Y(s.id),class:"text-indigo-600 text-xl font-bold px-2"},"+",8,Ut)])]),e("div",Ot,[t[24]||(t[24]=e("h2",{class:"text-xl font-semibold mb-4 pb-2"},"Details",-1)),t[25]||(t[25]=e("div",{class:"grid grid-cols-3 border-b font-medium text-gray-700"},[e("div",null,"Item"),e("div",{class:"text-center"},"Qty"),e("div",{class:"text-right"},"Price")],-1)),e("div",Dt,[t[22]||(t[22]=e("div",null,"Package",-1)),e("div",Et,a(s.qty),1),e("div",zt,"৳ "+a(K(s)*s.qty),1)]),(l(!0),r(y,null,b(s.selected_extras,n=>(l(),r("div",{key:n,class:"grid grid-cols-3 font-medium text-gray-700"},[e("div",null,a(U(n)),1),e("div",Jt,a(s.qty),1),e("div",Lt,"৳ "+a(O(n)*s.qty),1)]))),128)),e("div",Qt,[t[23]||(t[23]=e("div",{class:"col-span-2 font-semibold"},"Sub Total",-1)),e("div",Rt,"৳ "+a(s.total),1)])])],2))),128)),c.value.length>0?(l(),r("div",Ht,[e("div",Gt,[t[26]||(t[26]=e("span",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300"},"Total:",-1)),e("span",Kt,"৳ "+a(E.value),1)]),e("button",{onClick:X,disabled:P.value,class:"w-full text-lg bg-indigo-600 text-white hover:bg-indigo-700 text-center px-5 py-2.5 rounded-lg transition-colors duration-200 flex justify-center items-center mt-2"},[P.value?(l(),r("svg",Xt,t[27]||(t[27]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4z"},null,-1)]))):(l(),r(y,{key:1},[$("Proceed To Checkout")],64))],8,Wt)])):w("",!0)])])])])])]}),_:1}))}},ss=ce(Yt,[["__scopeId","data-v-24a159f4"]]);export{ss as default};
